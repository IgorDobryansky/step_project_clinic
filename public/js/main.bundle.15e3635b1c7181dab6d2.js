!function(){"use strict";var t={91:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},941:function(t,e,i){t.exports=i.p+"img/clinic_logod246adac946c88922100.png"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.m=t,i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t+"../"}(),i.b=document.baseURI||self.location.href,function(){var t,e,n,s=i(91),r=i.n(s),o=new URL(i(941),i.b);r()(o);class a{constructor(){this._visit=document.createElement("div"),this._visit.className="visit-card",this.visitPurpose=document.createElement("p"),this.visitPurpose.innerText="Болить голова",this.visitDescription=document.createElement("p"),this.visitDescription.innerText="Дуже сильно болить голова",this.isUrgency=document.createElement("select"),this.urgencyNormal=document.createElement("option"),this.urgencyNormal.innerText="Середня",this.urgencyLow=document.createElement("option"),this.urgencyLow.innerText="Низька",this.urgencyHight=document.createElement("option"),this.urgencyHight.innerText="Висока",this.isUrgency.append(this.urgencyLow,this.urgencyNormal,this.urgencyHight),this.fullName=document.createElement("p"),this.fullName.innerText="Ігор Добрянський",this._visit.append(this.visitPurpose,this.visitDescription,this.isUrgency,this.fullName)}render(){return this._visit}}class l{constructor(){this._modalWrapper=document.createElement("div"),this._modalWrapper.addEventListener("click",(t=>{let e=t.target,i=e===this._modal||this._modal.contains(e),n=e===this._closeButton;i&&!n||this._modalWrapper.remove()})),this._modalWrapper.className="modal-window-wrapper",this._modal=document.createElement("form"),this._modal.className="modal-window",this._closeButton=document.createElement("span"),this._closeButton.innerHTML="&#10005;",this._closeButton.className="modal-close-button",this._modal.append(this._closeButton),this._modalWrapper.append(this._modal)}}class c extends l{constructor(){super(),this._loginEmailFieldset=document.createElement("fieldset"),this._loginEmailFieldset.className="fieldset email-fieldset",this._loginEmailLabel=document.createElement("label"),this._loginEmailLabel.className="label email-label",this._loginEmailLabel.innerText="Емейл",this._emailInput=document.createElement("input"),this._emailInput.type="email",this._emailInput.className="input email-input",this._emailInput.id="email",this._emailInput.name="email",this._emailInput.placeholder="example@email.ua",this._emailInput.addEventListener("input",(()=>{this._errorMessage.innerHTML=""})),this._loginEmailFieldset.append(this._emailInput,this._loginEmailLabel),this._loginPasswordFieldset=document.createElement("fieldset"),this._loginPasswordFieldset.className="fieldset password-fieldset",this._loginPasswordLabel=document.createElement("label"),this._loginPasswordLabel.className="label password-label",this._loginPasswordLabel.for="password",this._loginPasswordLabel.innerText="Пароль",this._passwordInput=document.createElement("input"),this._passwordInput.type="password",this._passwordInput.className="input password-input",this._passwordInput.id="password",this._passwordInput.name="password",this._passwordInput.placeholder="example password",this._passwordInput.addEventListener("input",(()=>{this._errorMessage.innerHTML=""})),this._loginPasswordFieldset.append(this._passwordInput,this._loginPasswordLabel),this._errorMessage=document.createElement("span"),this._errorMessage.className="modal-error",this._enterButton=document.createElement("button"),this._enterButton.className="button-check-data",this._enterButton.innerText="Увійдіть",this._enterButton.tabIndex="0",this._enterButton.addEventListener("click",(t=>{this.loginRequest()})),this._orText=document.createElement("span"),this._orText.className="or-text",this._orText.innerText="або",this._registerLink=document.createElement("a"),this._registerLink.className="register-link",this._registerLink.target="_blank",this._registerLink.tabIndex="0",this._registerLink.href="https://ajax.test-danit.com/front-pages/cards-register.html",this._registerLink.innerText="Зареєструйтесь",this._modal.append(this._loginEmailFieldset,this._loginPasswordFieldset,this._errorMessage,this._enterButton,this._orText,this._registerLink)}async loginRequest(){const t=this._emailInput.value,e=this._passwordInput.value;this._enterButton.disabled=!0,this._errorMessage.classList.remove("show");try{let i=await fetch("https://ajax.test-danit.com/api/v2/cards/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!(await i).ok)throw"Перевірте правильність емейлу чи паролю або зареєструйтесь.";{let t=await i.text();this._modalWrapper.remove(),localStorage.setItem("clinic-token",`${t}`),u.loginStatus=!0,(new u).render()}}catch(t){this._enterButton.disabled=!1,this._errorMessage.innerHTML=t,this._errorMessage.classList.add("show")}}render(){document.body.append(this._modalWrapper)}}class u{constructor(){this._loginButton=document.createElement("button"),this._loginButton.className="button-enter",this._loginButton.innerText="Увійти",this._loginButton.addEventListener("click",(t=>{this.getLogin()})),this._logoutButton=document.createElement("button"),this._logoutButton.innerText="Вийти",this._logoutButton.className="button logout-button",this._logoutButton.addEventListener("click",(t=>{localStorage.removeItem("clinic-token"),u.loginStatus=!1,(new u).render()})),this._createVisit=document.createElement("button"),this._createVisit.innerText="Створити візит",this._createVisit.addEventListener("click",(t=>{t.preventDefault()}))}static isLogged(){(new u).render()}render(){const t=document.getElementById("login-status");t.innerHTML="",localStorage.getItem("clinic-token")?(u.loginStatus=!0,t.append(this._createVisit,this._logoutButton)):(u.loginStatus=!1,t.append(this._loginButton))}getLogin(){(new c).render()}}t=u,n=void 0,(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="loginStatus"))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,function(){const t=document.getElementById("visits");u.isLogged(),t.append((new a).render())}()}()}();