!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},941:function(e,t,n){e.exports=n.p+"img/clinic_logod246adac946c88922100.png"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"}(),n.b=document.baseURI||self.location.href,function(){var e,t,i,s=n(91),r=n.n(s),o=new URL(n(941),n.b);r()(o);class a{constructor(){this._visit=document.createElement("div"),this._visit.className="visit-card",this.visitPurpose=document.createElement("p"),this.visitPurpose.innerText="Болить голова",this.visitDescription=document.createElement("p"),this.visitDescription.innerText="Дуже сильно болить голова",this.isUrgency=document.createElement("select"),this.urgencyNormal=document.createElement("option"),this.urgencyNormal.innerText="Середня",this.urgencyLow=document.createElement("option"),this.urgencyLow.innerText="Низька",this.urgencyHight=document.createElement("option"),this.urgencyHight.innerText="Висока",this.isUrgency.append(this.urgencyLow,this.urgencyNormal,this.urgencyHight),this.fullName=document.createElement("p"),this.fullName.innerText="Ігор Добрянський",this._visit.append(this.visitPurpose,this.visitDescription,this.isUrgency,this.fullName)}render(){return this._visit}}class l{constructor(){this._modalWrapper=document.createElement("div"),this._modalWrapper.addEventListener("click",(e=>{let t=e.target,n=t===this._modal||this._modal.contains(t),i=t===this._closeButton;n&&!i||this._modalWrapper.remove()})),this._modalWrapper.className="modal-window-wrapper",this._modal=document.createElement("div"),this._modal.className="modal-window",this._closeButton=document.createElement("span"),this._closeButton.innerHTML="&#10005;",this._closeButton.className="modal-close-button",this._modal.append(this._closeButton),this._modalWrapper.append(this._modal)}}class c extends l{constructor(){super(),this._loginEmailFieldset=document.createElement("fieldset"),this._loginEmailFieldset.className="email-fieldset",this._loginEmailLegend=document.createElement("legend"),this._loginEmailLegend.className="email-legend",this._loginEmailLegend.innerText="Емейл",this._emailInput=document.createElement("input"),this._emailInput.name="email",this._emailInput.addEventListener("input",(()=>{this._errorMessage.innerHTML=""})),this._emailInput.type="email",this._emailInput.className="email-input",this._loginEmailFieldset.append(this._loginEmailLegend,this._emailInput),this._loginPasswordFieldset=document.createElement("fieldset"),this._loginPasswordFieldset.className="password-fieldset",this._loginPasswordLegend=document.createElement("legend"),this._loginPasswordLegend.className="password-legend",this._loginPasswordLegendText=document.createElement("span"),this._loginPasswordLegendText.className="password-legend_text",this._loginPasswordLegendText.innerText="Пароль",this._loginPasswordLegend.append(this._loginPasswordLegendText),this._passwordInput=document.createElement("input"),this._passwordInput.addEventListener("input",(()=>{this._errorMessage.innerHTML=""})),this._passwordInput.type="password",this._passwordInput.className="password-input",this._loginPasswordFieldset.append(this._loginPasswordLegend,this._passwordInput),this._errorMessage=document.createElement("span"),this._errorMessage.className="modal-error",this._enterButton=document.createElement("button"),this._enterButton.className="button-check-data",this._enterButton.innerText="Увійдіть",this._enterButton.addEventListener("click",(e=>{e.preventDefault(),this.loginRequest()})),this._orText=document.createElement("span"),this._orText.className="or-text",this._orText.innerText="або",this._registerLink=document.createElement("a"),this._registerLink.className="register-link",this._registerLink.target="_blank",this._registerLink.href="https://ajax.test-danit.com/front-pages/cards-register.html",this._registerLink.innerText="Зареєструйтесь",this._modal.append(this._loginEmailFieldset,this._loginPasswordFieldset,this._errorMessage,this._enterButton,this._orText,this._registerLink)}async loginRequest(){const e=this._emailInput.value,t=this._passwordInput.value;this._enterButton.disabled=!0,this._errorMessage.classList.remove("show");try{let n=await fetch("https://ajax.test-danit.com/api/v2/cards/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!(await n).ok)throw"Перевірте правильність емейлу чи паролю або зареєструйтесь";{let e=await n.text();this._modalWrapper.remove(),localStorage.setItem("clinic-token",`${e}`),d.loginStatus=!0,(new d).render()}}catch(e){this._enterButton.disabled=!1,this._errorMessage.innerHTML=e,this._errorMessage.classList.add("show")}}render(){document.body.append(this._modalWrapper)}}class d{constructor(){this._loginButton=document.createElement("button"),this._loginButton.className="button-enter",this._loginButton.innerText="Увійти",this._loginButton.addEventListener("click",(e=>{this.getLogin()})),this._logoutButton=document.createElement("button"),this._logoutButton.innerText="Вийти",this._logoutButton.addEventListener("click",(e=>{localStorage.removeItem("clinic-token"),d.loginStatus=!1,(new d).render()})),this._createVisit=document.createElement("button"),this._createVisit.innerText="Створити візит",this._createVisit.addEventListener("click",(e=>{e.preventDefault()}))}static isLogged(){(new d).render()}render(){const e=document.getElementById("login-status");e.innerHTML="",localStorage.getItem("clinic-token")?(d.loginStatus=!0,e.append(this._createVisit,this._logoutButton)):(d.loginStatus=!1,e.append(this._loginButton))}getLogin(){(new c).render()}}e=d,i=void 0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="loginStatus"))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,function(){const e=document.getElementById("visits");d.isLogged(),e.append((new a).render())}()}()}();